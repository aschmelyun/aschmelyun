<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <title>I built a static site generator to help during COVID-19 - Andrew Schmelyun</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="For showcasing local restaurants still open during coronavirus, I built a framework that uses Markdown files and creates a local directory website">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="I built a static site generator to help during COVID-19" />
    <meta property="og:description" content="For showcasing local restaurants still open during coronavirus, I built a framework that uses Markdown files and creates a local directory website" />
    <meta property="og:url" content="https://aschmelyun.com/" />
    <meta property="og:site_name" content="Andrew Schmelyun" />
            <meta name="og:image" content="https://aschmelyun.com/assets/images/meta/blog/i-built-a-static-site-generator-to-help-during-covid-19.jpg" />
    
    <meta name="twitter:description" content="For showcasing local restaurants still open during coronavirus, I built a framework that uses Markdown files and creates a local directory website" />
    <meta name="twitter:title" content="I built a static site generator to help during COVID-19" />
    <meta name="twitter:site" content="@aschmelyun" />
            <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:image" content="https://aschmelyun.com/assets/images/meta/blog/i-built-a-static-site-generator-to-help-during-covid-19.jpg" />
    
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-16x16.png">
    <meta name="theme-color" content="#1a202c">

    <link rel="stylesheet" type="text/css" href="/assets/css/app.css?id=d3daf746e8f437aa6da7">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-62877530-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-62877530-1');
    </script>
</head>
<body class="">
<div class="container mx-auto pb-6 md:pb-12 antialiased">
    <div class="w-auto mx-4 lg:w-4/5 lg:mx-auto">
        <header class="text-gray-900 font-semibold">
    <div class="container mx-auto flex flex-wrap py-4 flex-col md:flex-row items-center">
        <a href="/" id="link-home" class="flex title-font font-medium items-center text-gray-900 mb-4 md:mb-0 hover:opacity-75 transition-opacity duration-200">
            <img src="/assets/images/andrew-schmelyun-profile.jpg" alt="Andrew Schmelyun profile picture" class="w-24 h-24 rounded-full">
        </a>
        <nav class="w-full md:w-auto md:ml-auto flex flex-wrap items-center text-lg justify-around lg:justify-center">
            <a href="/blog" class="inline-flex bg-white text-gray-900 mr-0 lg:mr-6 hover:bg-gray-200 border-0 py-1 px-3 focus:outline-none transition-colors duration-200">Blog</a>
            <a href="/videos" class="inline-flex bg-white text-gray-900 mr-0 lg:mr-6 hover:bg-gray-200 border-0 py-1 px-3 focus:outline-none transition-colors duration-200">Videos</a>
            <a href="/uses" class="inline-flex bg-white text-gray-900 mr-0 lg:mr-6 hover:bg-gray-200 border-0 py-1 px-3 focus:outline-none transition-colors duration-200">Uses</a>
            <a href="/projects" class="inline-flex bg-white text-gray-900 mr-0 lg:mr-6 hover:bg-gray-200 border-0 py-1 px-3 focus:outline-none transition-colors duration-200">Projects</a>
        </nav>
        <a href="https://aschmelyun.substack.com" class="inline-flex items-center bg-gray-200 text-gray-900 border-0 py-1 px-3 focus:outline-none hover:bg-gray-900 hover:text-white font-semibold text-lg mt-4 md:mt-0 transition-colors duration-200">Newsletter
            <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-4 h-4 ml-1" viewBox="0 0 24 24">
                <path d="M5 12h14M12 5l7 7-7 7"></path>
            </svg>
        </a>
    </div>
</header>
        <section class="text-gray-600 body-font overflow-hidden mt-4 lg:mt-16">
    <h1 class="text-3xl lg:text-4xl text-gray-900 font-medium relative">I built a static site generator to help during COVID-19</h1>
    <div class="pt-4 pb-12 w-full flex flex-col items-start">
        <div class="mb-8 flex items-center">
            <span class="inline-block mr-4 text-gray-900 font-medium">Published <time datetime="2020-03-31 00:00:00">Mar 31 2020</time></span>
                            <span class="inline-block py-0.5 px-2 mr-2 rounded bg-white text-gray-600 border border-gray-600 text-xs font-medium tracking-widest tag-laravel">LARAVEL</span>
                    </div>
        <div class="leading-relaxed blog-content w-full"><p><strong>tl;dr: See <a href="https://github.com/aschmelyun/cleaver-directory">github.com/aschmelyun/cleaver-directory</a> for more info and a quick-start guide.</strong></p>
<p>A few months ago, I published <a href="https://dev.to/aschmelyun/cleaver-a-blazing-fast-static-site-generator-using-laravel-s-blade-1k32">an article</a> about a static site generator I made called Cleaver. Before this weekend, I mainly was just letting it sit idle. Fixing a few issues that sprung up, figuring out what features I should be adding to it, et cetera.</p>
<p>All last week I've been thinking and trying to come up with something that I could build to potentially help, in any way, those around my during the COVID-19 pandemic. I've noticed the large amount of dashboards showing statistics, infection rates, and the like, and I honestly wanted to shy away from that purely for my own sanity. I wanted to do something that would make an impact, and potentially relieve stress, on local businesses in my small Florida city. So, <strong>I came up with an idea</strong>.</p>
<h2>The idea</h2>
<p>I decided to build a local directory, a website map of all non-chain restaurants in my county that were still open and serving take-out and curbside food. The goal being to spread awareness to others about dining options that are still available, and hopefully funneling a source of business into local establishments.</p>
<p>The basic gist would be a landing page consisting of a map, along with a list of restaurants that could be filterable by tags, city, or a text box for user input. Clicking on a restaurant would give you details like their open hours, what type of food they're serving, if they have a limited menu, etc.</p>
<p>Also, I wanted this to be <strong>100% open source and easy for other developers to use</strong>. That way, someone else could clone this project, and spin it up on a server, and add data for their local city or area. Originally I was planning on using a traditional Laravel backend for this, combined with a MySQL database and Vue frontend. But, I thought, that might hinder some people using it.</p>
<p>Not everyone can, or wants to, purchase hosting that can accommodate those requirements for a non-profit community project. So I went deeper. What if I used flat-file storage, or better yet, <strong>what if the whole site could be built into static files and served on a $0 Netlify instance</strong>? Then my Cleaver static site generator came to mind, and I started hacking away at it.</p>
<h2>The dev process</h2>
<p>As it previously stood, Cleaver was incredibly simple. It took Markdown or JSON files as content, looped through them in an array, and with the help of Laravel's Blade templates, built out HTML files that were saved depending on the path you specified. This was great for something like a blog, or a documentation site, but in order for this to work the way I wanted it was missing a crucial piece.</p>
<p>On the home page, I needed to have a running list of all of the restaurants available throughout the site. The problem was that I didn't want to have to manually add each one as an individual content file, AND add it to an index page as well. My goal was, <strong>add a restaurant Markdown file and the landing page will automatically pull it in</strong>.</p>
<p>It honestly was easy enough to accomplish using Tighten's Collection package. If you're not familiar with Laravel, Collections are basically arrays on steroids. There's <a href="https://laravel.com/docs/5.8/collections#available-methods">literally dozens of methods</a> that you can use to filter, map, sort, and loop through items you add. In my case, I added a block of code that adds every single piece of content across the site as a collection, and makes it available to each template as a <code>$content</code> variable.</p>
<p>That way, to get my list of restaurants on my index page, I was able to do something like this:</p>
<pre><code class="language-php">$listings = $content-&gt;filter(function($item, $key) {
    return $item-&gt;view === 'layout.restaurant';
});</code></pre>
<p>Since only the restaurant pages used the <code>layout.restaurant</code> view, I could filter through the array of content and pull in all the restaurants with their subsequent data. Then, just like an array, I could call a foreach loop on the collection and spit out the details for each of them.</p>
<p>The rest of the development process was pretty easy and straightforward. Using TailwindCSS and a few Blade templates, I hacked together a landing page, a content page (for things like FAQs and contact info), and individual listing pages. The landing page is powered by Vue and contains an embedded Google Map, and live filtering of restaurants. All you have to do is add Markdown files following a specific format and fill in some brief details.</p>
<p>An example restaurant Markdown file might look like this:</p>
<pre><code class="language-md">---
view: layout.listing
path: /taco-dive
tags: delivery,take-out,mexican,curbside
title: Taco Dive
address: 10501 SW Village Center Dr
city: Port St. Lucie
state: FL
lat: 27.267700
long: -80.432040
---

Not your average hole in the wall. Popular spot for dive tacos, sandwiches, burritos, and salads.

Currently serving a limited menu, for their full menu see [their website](https://tacodive.com).

**Hours:**
- Mon-Sat: 12pm-8pm
- Sun: Closed</code></pre>
<p>So, let's say you want to get started and create a directory of your own, here's how it works!</p>
<h2>Building your own directory</h2>
<p>Before you get started, there are a few requirements if you want to compile the site and assets locally on your machine. They are:</p>
<ul>
<li>PHP 7.1+ installed</li>
<li>A fairly recent version of Node + NPM</li>
</ul>
<p>First step, is clone the repo or use Composer to create a new project at a directory of your choosing:</p>
<pre><code class="language-bash">composer create-project aschmelyun/cleaver-directory my-directory</code></pre>
<p>Once that's ready, you'll need to install the Node dependencies:</p>
<pre><code class="language-bash">npm install</code></pre>
<p>Next, it's time to fill your directory with listings! These could be restaurants, shops, or any other businesses that you want to appear on the map. In the <code>resources/content/listings</code> directory, copy one of the example Markdown files and make your necessary edits.</p>
<p>It should be noted that the filename you choose to save your content as doesn't matter. The <code>path</code> variable that you set in the file will determine where your page ends up living on your directory.</p>
<p>After you're satisfied with your content choices, the last thing to do is build your site! From your command line in the root directory, you have two choices:</p>
<pre><code class="language-bash">npm run production // this will build your assets quickly, but is recommended for local development
npm run production // this will build, minify, and transpile your assets</code></pre>
<p>Your compiled HTML files will be put in a <code>dist/</code> directory in your project's folder. It will contain all of the compiled assets, directory structure, and rendered markup for your entire site.</p>
<p>Let's get it up and online!</p>
<h2>Deploying your site</h2>
<p>If you're using your own server, it's as easy as either:</p>
<ul>
<li>Uploading just the <code>/dist</code> directory to your webroot, or</li>
<li>Uploading the entire project and modifying the webroot of your server to use the <code>/dist</code> folder</li>
</ul>
<p>From there, you should be able to see your finished site!</p>
<p>But what about that <strong>$0 deployment from Netlify</strong> that we talked about earlier? It's pretty simple. Just follow these brief steps:</p>
<p>First, sign up for an account at <a href="https://netlify.com">Netlify</a> if you don't already have one.</p>
<p>Then, upload your entire finished project to a GitHub repository, with or without the /dist folder attached to it.</p>
<p>Go into your Netlify dashboard and create a new site from a GitHub repository, choosing the project that you just committed.</p>
<p>In the build settings, you're going to type in <code>npm run production</code> as the build command, and <code>dist</code> as the publish directory. Additionally, in the Environment Variables section, you'll have to specify <code>PHP_VERSION</code> as <code>7.2</code>, since 5.6 is by default the one used.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/dimdy7crgxkor4gzt9ne.png" alt="Screenshot of Netlify build settings" /></p>
<p>That's it! After hitting <strong>Trigger deploy</strong>, Netlify will clone your site, install the Composer and NPM dependencies, run the asset compilation, and output the entire site to the <code>dist</code> directory. That directory is then served out to the public and your site is ready to be viewed!</p>
<p>All you have to do is either share the randomly-generated domain given, or add in a custom domain name to attach the project to.</p>
<h2>That's about it</h2>
<p>Well, that's all there is! This project is still very much a work in progress. As it was hacked out over a literal weekend, there's a lot of room for optimization, organization, and general additions.</p>
<p>Please feel free to add any issues, bugs, or feature requests that you might come across to the <a href="https://github.com/aschmelyun/cleaver-directory">GitHub repo</a>. You can also reach out to me on <a href="https://twitter.com/aschmelyun">Twitter</a> if you have any questions about this project, or web development in general. </p></div>
    </div>
</section>        <footer class="text-gray-600 body-font overflow-hidden mt-12">
    <div class="flex flex-wrap -mx-4 -mb-10 text-center items-center justify-between">
        <div class="w-full lg:w-1/2 mb-10 px-4 text-center lg:text-left">
            <p class="mb-2 font-medium text-gray-900">&copy;2021 Andrew Schmelyun</p>
            <p>This site is powered by <a href="https://github.com/aschmelyun/cleaver" target="_blank" rel="noreferrer" class="inline-block py-0.5 px-2 rounded bg-white text-gray-600 border border-gray-600 text-xs font-medium tracking-widest hover:bg-gray-600 hover:text-white transition-colors duration-200">CLEAVER 🔥🔪</a></p>
        </div>
        <div class="w-full lg:w-1/2 mb-10 px-4 text-center lg:text-right">
            <p class="mb-2 font-medium text-gray-900">Follow me</p>
                        <p>
                                    <a href="https://github.com/aschmelyun" target="_blank" rel="noreferrer" class="text-gray-600 hover:text-gray-900 transition-colors duration-200">GitHub</a>
                                            &nbsp;&mdash;&nbsp;
                                                        <a href="https://twitter.com/aschmelyun" target="_blank" rel="noreferrer" class="text-gray-600 hover:text-gray-900 transition-colors duration-200">Twitter</a>
                                            &nbsp;&mdash;&nbsp;
                                                        <a href="https://youtube.com/aschmelyun" target="_blank" rel="noreferrer" class="text-gray-600 hover:text-gray-900 transition-colors duration-200">YouTube</a>
                                            &nbsp;&mdash;&nbsp;
                                                        <a href="https://dev.to/aschmelyun" target="_blank" rel="noreferrer" class="text-gray-600 hover:text-gray-900 transition-colors duration-200">Dev.to</a>
                                                </p>
        </div>
    </div>
</footer>
<script type="text/javascript" src="/assets/js/app.js?id=d67be835fdaca4b02a6f"></script>
    </div>
</div>
</body>
</html>